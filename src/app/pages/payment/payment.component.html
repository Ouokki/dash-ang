<div *ngIf="dashboard" class="credit-card">
  <div class="card-front">
    <div class="card-type">
      <mat-icon>credit_card</mat-icon>
    </div>
    <div class="card-number">
      <div class="number">
        {{ (profile$ | async)?.card?.cardnumber || "N/A" }}
      </div>
    </div>
    <div class="card-info">
      <div class="cardholder">
        {{ (profile$ | async)?.card?.fullname || "N/A" }}
      </div>
      <div class="exp-date">
        Exp: {{ (profile$ | async)?.card?.expiration || "N/A" }}
      </div>
    </div>
  </div>
  <div class="card-back">
    <div class="magnetic-stripe"></div>
    <div class="signature"></div>
    <div class="ccv">
      <div class="ccv-label">CCV</div>
      <div class="ccv-number">123</div>
    </div>
  </div>
</div>

<div *ngIf="payment">
  <form [formGroup]="form" (ngSubmit)="submit()">

    <div class="form-group">
      <label for="cvv">fullname:</label>
      <input type="text" id="fullname" formControlName="fullname" class="form-control" />
    </div>
    <!-- CVV -->
    <div class="form-group">
      <label for="cvv">CVV:</label>
      <input type="text" id="cvv" formControlName="cvv" class="form-control" />
      <div *ngIf="form.get('cvv')?.hasError('required') && form.get('cvv')?.touched">
        CVV is required.
      </div>
      <div *ngIf="form.get('cvv')?.hasError('invalidCVV') && form.get('cvv')?.touched">
        Invalid CVV. Please enter a 3 or 4-digit number.
      </div>
    </div>
  
    <!-- Email -->
    <div class="form-group">
      <label for="email">Email:</label>
      <input type="email" id="email" formControlName="email" class="form-control" />
      <div *ngIf="form.get('email')?.hasError('required') && form.get('email')?.touched">
        Email is required.
      </div>
      <div *ngIf="form.get('email')?.hasError('invalidEmail') && form.get('email')?.touched">
        Invalid email format.
      </div>
    </div>
  
  
    <!-- Bank Card Number -->
    <div class="form-group">
      <label for="cardnumber">Bank Card Number:</label>
      <input type="text" id="cardnumber" formControlName="cardnumber" class="form-control" />
      <div *ngIf="form.get('cardnumber')?.hasError('required') && form.get('cardnumber')?.touched">
        Bank Card Number is required.
      </div>
      <div *ngIf="form.get('cardnumber')?.hasError('invalidCardNumber') && form.get('cardnumber')?.touched">
        Invalid Bank Card Number. Please enter a 16-digit number.
      </div>
    </div>
  
    <!-- Expiration Date -->
    <div class="form-group">
      <label for="expiration">Expiration Date (MM/YY):</label>
      <input type="text" id="expirationDate" formControlName="expiration" class="form-control" />
      <div *ngIf="form.get('expiration')?.hasError('required') && form.get('expirationDate')?.touched">
        Expiration Date is required.
      </div>
      <div *ngIf="form.get('expiration')?.hasError('invalidExpirationDate') && form.get('expiration')?.touched">
        Invalid Expiration Date format (MM/YY).
      </div>
      <div *ngIf="form.get('expiration')?.hasError('expiredCard') && form.get('expiration')?.touched">
        Card has already expired.
      </div>
    </div>
  
    <!-- Submit Button -->
    <button type="submit" [disabled]="form.invalid">Pay</button>
  </form>
</div>
